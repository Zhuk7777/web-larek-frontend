# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Архитектура приложения
В проекте реализовывается MVP архитектура  
В качестве посредника между моделью и отображением выступает брокер событий `EventEmitter`  

## Базовые классы
### `EventEmitter` обеспечивает работу событий
#### Поля
* _events - объект Map, который хранит названия событий и им соответствующие функции обратного вызова  
#### Методы
* constructor - инициализирует поле _events как пустой объект Map
* on - устанавливает обработчик на событие
* off - удаляет обработчик с события и удаляет событие, если обработчиков не осталось
* emit - инициирует событие с данными
* onAll - слушает все события
* offAll - сбрасывает все обработчики
* trigger - реализует коллбек триггер, генерирующий событие при вызове  
### `Api` предназначен для взаимодействия с сервером
#### Поля
* baseUrl - базовый URL
* options - параметры запроса
#### Методы
* constructor - инициализирует поля класса передаваемыми аргументами (baseUrl и options)
* handleResponse - обрабатывает ответ от сервера (успешно/ошибка)
* get - выполняет get запросы
* post - выполняет POST, PUT, DELETE запросы  
## Бизнес-логика
### `Model<T>` выступает в качестве абстрактного родительского класса для всех моделей в системе.
#### Методы
* constructor(data: Partial\<T\>, events: IEvents) -  конструктор, отвечающий за инициализацию модели данными и объектом событий.
* emit(event: string, data?: object) - генерирует события
### `AppModel<T>` наследуется от абстрактного класса `Model` и реализует функциональные возможности приложения. Значением дженерика является интерфейс `IAppModel`.
#### Методы
* setCatalog - установка каталога товаров
* addCardToBasket - добавление товара в корзину
* removeCardFromBasket - удаление товара из корзины
* getTotalPrice - получение итоговый суммы по товарам в корзине. Подсчет и хранение этой суммы осуществляется в классе, который имплементирует интерфейс `IBasket`
* getBasket - получение списка товаров, добавленных в корзину
* setPreview - установка данных для модального окна, которое обеспечивает предварительный просмотр товара
* setOrder - сохранение данных заказа
* validateOrder - валидация данных, которые ввел пользователь во время оформления заказа
## Отображение
### `View<T>` - интерфейс для всех представлений в приложении.
#### Поля
* container - контейнер представления
#### Методы
* constructor(container: HTMLElement) -  конструктор для инициализации представления.
* toggleClass(element: HTMLElement, className: string, force?: boolean): void - смена CSS класса элемента
* setText(element: HTMLElement, value: unknown): void - установка текстового содержимого элемента
* hideElement(element: HTMLElement): void - скрытие элемента
* showElement(element: HTMLElement): void - отображение элемента
* setImage(element: HTMLElement, src: string, alt?: string): void - установка изображения и опционально его альтернативного текста
* render(data?: T): HTMLElement - рендеринг представления с переданными данными
### `PageView<T>` - класс наследник интерфейса `View<T>`. Предназначен для отображения всей страницы.
#### Поля
* data - данные модального окна
* closebutton - кнопка закрытия модального окна
#### Методы
* constructor(data: Partial\<IPage\>, events: IEvents) -  конструктор для инициализации данных страницы, в который также передается объект для управления событиями.
* updateData(data: Partial\<IPage\>) - обновление данных модального окна
### `CardView<T>` - класс наследник интерфейса `View<T>`. Предназначен для отображения элемента товара.
#### Поля
* data - информация о товаре
#### Методы
* constructor(data: Partial\<ICard\>, events: IEvents) -  конструктор для инициализации данных товара, в который также передается объект для управления событиями.
* updateData(data: Partial\<ICard\>) - обновление данных товара
### `OrderView<T>` - класс наследник интерфейса `View<T>`. Предназначен для отображения формы заказа.
#### Поля
* data - информация о заказе
* submit - DOM-элемент кнопки отправки формы
* errors - DOM-элемент для отображения ошибок в форме
* valid - состояние кнопки отправки данных
#### Методы
* constructor(data: Partial\<IOrder\>, events: IEvents) -  конструктор для инициализации данных товара, в который также передается объект для управления событиями.
* updateData(data: Partial\<IOrder\>) - обновление данных заказа
* onInputChange - обработчик события ввода данных в поле
* setValid - смена состояния submit кнопки
* setErrors - установка ошибок для полей
### `BasketView<T>` - класс наследник интерфейса `View<T>`. Предназначен для отображения корзины.
#### Поля
* data - информация о корзине
#### Методы
* constructor(data: Partial\<IBasket\>, events: IEvents) -  конструктор для инициализации данных корзины, в который также передается объект для управления событиями.
* updateData(data: Partial\<IBasket\>) - обновление данных корзины
### `ModalView<T>` - класс наследник интерфейса `View<T>`. Предназначен для отображения модальных окон.
#### Поля
* data - данные модального окна
#### Методы
* constructor(data: Partial\<IModal\>, events: IEvents) -  конструктор для инициализации данных модального окна, в который также передается объект для управления событиями.
* updateData(data: Partial\<IModal\>) - обновление данных модального окна
* open - открытие модального окна
* close - закрытие модального окна
### `SuccessView<T>` - класс наследник интерфейса `View<T>`. Предназначен для отображения модального окна успешного оформления заказа.
#### Поля
* data - данные модального окна
* closebutton - кнопка закрытия модального окна
#### Методы
* constructor(data: Partial\<IOrderStatus\>, events: IEvents) -  конструктор для инициализации данных окна, в который также передается объект для управления событиями.
* updateData(data: Partial\<IOrderStatus\>) - обновление данных модального окна